serviceMaps:
  serviceName: Inventory Service
  mappings:
    - version: 1
      name: Stores create
      description: create stores in ulb
      fromTopic: inv-store-save-topic
      queryMaps:
        - query: >-
            INSERT INTO store(id, code, name, officelocation, description, department,
            storeincharge,billingaddress, deliveryaddress,
            contactno1,contactno2, email, iscentralstore, active,
            tenantId, createdby, lastmodifiedby,createdtime,lastmodifiedtime)
            VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.stores.*
          jsonMaps:
            - jsonPath: $.stores.*.id
            - jsonPath: $.stores.*.code
            - jsonPath: $.stores.*.name
            - jsonPath: $.stores.*.officeLocation.code
            - jsonPath: $.stores.*.description
            - jsonPath: $.stores.*.department.code
            - jsonPath: $.stores.*.storeInCharge.code
            - jsonPath: $.stores.*.billingAddress
            - jsonPath: $.stores.*.deliveryAddress
            - jsonPath: $.stores.*.contactNo1
            - jsonPath: $.stores.*.contactNo2
            - jsonPath: $.stores.*.email
            - jsonPath: $.stores.*.isCentralStore
            - jsonPath: $.stores.*.active
            - jsonPath: $.stores.*.tenantId
            - jsonPath: $.stores.*.auditDetails.createdBy
            - jsonPath: $.stores.*.auditDetails.lastModifiedBy
            - jsonPath: $.stores.*.auditDetails.createdTime
              dbType: LONG
            - jsonPath: $.stores.*.auditDetails.lastModifiedTime
              dbType: LONG
    - version: 1
      name: Stores update
      description: update stores in ulb
      fromTopic: inv-store-update-topic
      queryMaps:
        - query: >-
            UPDATE store SET
            name=?,description=?,department=?,storeincharge=?,officelocation=?,
            billingaddress=?,deliveryaddress=?,contactno1=?,contactno2=?,email=?,iscentralstore=?,active=?,lastmodifiedby=?,lastmodifiedtime=?
            WHERE code=? AND tenantid=?;
          basePath: $.stores.*
          jsonMaps:
            - jsonPath: $.stores.*.name
            - jsonPath: $.stores.*.description
            - jsonPath: $.stores.*.department.code
            - jsonPath: $.stores.*.storeInCharge.code
            - jsonPath: $.stores.*.officeLocation.code
            - jsonPath: $.stores.*.billingAddress
            - jsonPath: $.stores.*.deliveryAddress
            - jsonPath: $.stores.*.contactNo1
            - jsonPath: $.stores.*.contactNo2
            - jsonPath: $.stores.*.email
            - jsonPath: $.stores.*.isCentralStore
            - jsonPath: $.stores.*.active
            - jsonPath: $.stores.*.auditDetails.lastModifiedBy
            - jsonPath: $.stores.*.auditDetails.lastModifiedTime
              dbType: LONG
            - jsonPath: $.stores.*.code
            - jsonPath: $.stores.*.tenantId

    - version: 1.0
      name: materials create
      description: create materials in inventory
      fromTopic: inv-materials-save-topic
      queryMaps:
        - query: INSERT INTO material(id, code, name, materialclass, description, oldcode, materialtype, baseuom, inventorytype, status, purchaseuom, expenseaccount, minquantity, maxquantity, stockinguom, lotcontrol, shelflifecontrol, serialnumber, scrapable, assetcategory, reorderlevel, reorderquantity, model, manufacturepartno, techincalspecs, termsofdelivery, inactivedate, tenantid , createdby, lastmodifiedby, createdtime, lastmodifiedtime ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.materials.*
          jsonMaps:
            - jsonPath: $.materials.*.id
            - jsonPath: $.materials.*.code
            - jsonPath: $.materials.*.name
            - jsonPath: $.materials.*.materialClass
            - jsonPath: $.materials.*.description
            - jsonPath: $.materials.*.oldCode
            - jsonPath: $.materials.*.materialType.code
            - jsonPath: $.materials.*.baseUom.code
            - jsonPath: $.materials.*.inventoryType
            - jsonPath: $.materials.*.status
            - jsonPath: $.materials.*.purchaseUom.code
            - jsonPath: $.materials.*.expenseAccount.glCode
            - jsonPath: $.materials.*.minQuantity
              dbType: LONG
            - jsonPath: $.materials.*.maxQuantity
              dbType: LONG
            - jsonPath: $.materials.*.stockingUom.code
            - jsonPath: $.materials.*.lotControl
            - jsonPath: $.materials.*.shelfLifeControl
            - jsonPath: $.materials.*.serialNumber
            - jsonPath: $.materials.*.scrapable
            - jsonPath: $.materials.*.assetCategory.code
            - jsonPath: $.materials.*.reorderLevel
              dbType: LONG
            - jsonPath: $.materials.*.reorderQuantity
              dbType: LONG
            - jsonPath: $.materials.*.model
            - jsonPath: $.materials.*.manufacturePartNo
            - jsonPath: $.materials.*.techincalSpecs
            - jsonPath: $.materials.*.termsOfDelivery
            - jsonPath: $.materials.*.inActiveDate
              dbType: LONG
            - jsonPath: $.materials.*.tenantId
            - jsonPath: $.materials.*.auditDetails.createdBy
            - jsonPath: $.materials.*.auditDetails.lastModifiedBy
            - jsonPath: $.materials.*.auditDetails.createdTime
              dbType: LONG
            - jsonPath: $.materials.*.auditDetails.lastModifiedTime
              dbType: LONG

    - version: 1.0
      name: materials update
      description: update materials in inventory
      fromTopic: inv-materials-update-topic
      queryMaps:
        - query: UPDATE material SET name=?,  materialclass=?, description=?,  inactivedate=?, oldcode=?,  materialtype=?,  baseuom=?,  inventorytype=?,  status=?,  purchaseuom=?,  expenseaccount=?,  minquantity=?,  maxquantity=?,  stockinguom=?,  lotcontrol=?, shelflifecontrol=?, serialnumber=?, scrapable=?,  assetcategory=?, reorderlevel=?,  reorderquantity=?, model=?,  manufacturepartno=?,  techincalspecs=?,  termsofdelivery=?, lastmodifiedby=?,  lastmodifiedtime=? WHERE code=? AND tenantid=?;
          basePath: $.materials.*
          jsonMaps:
            - jsonPath: $.materials.*.name
            - jsonPath: $.materials.*.materialClass
            - jsonPath: $.materials.*.description
            - jsonPath: $.materials.*.inActiveDate
              dbType: LONG
            - jsonPath: $.materials.*.oldCode
            - jsonPath: $.materials.*.materialType.code
            - jsonPath: $.materials.*.baseUom.code
            - jsonPath: $.materials.*.inventoryType
            - jsonPath: $.materials.*.status
            - jsonPath: $.materials.*.purchaseUom.code
            - jsonPath: $.materials.*.expenseAccount.glCode
            - jsonPath: $.materials.*.minQuantity
              dbType: LONG
            - jsonPath: $.materials.*.maxQuantity
              dbType: LONG
            - jsonPath: $.materials.*.stockingUom.code
            - jsonPath: $.materials.*.lotControl
            - jsonPath: $.materials.*.shelfLifeControl
            - jsonPath: $.materials.*.serialNumber
            - jsonPath: $.materials.*.scrapable
            - jsonPath: $.materials.*.assetCategory.code
            - jsonPath: $.materials.*.reorderLevel
              dbType: LONG
            - jsonPath: $.materials.*.reorderQuantity
              dbType: LONG
            - jsonPath: $.materials.*.model
            - jsonPath: $.materials.*.manufacturePartNo
            - jsonPath: $.materials.*.techincalSpecs
            - jsonPath: $.materials.*.termsOfDelivery
            - jsonPath: $.materials.*.auditDetails.lastModifiedBy
            - jsonPath: $.materials.*.auditDetails.lastModifiedTime
              dbType: LONG
            - jsonPath: $.materials.*.code
            - jsonPath: $.materials.*.tenantId
    - version: 1
      name: Supplier create
      description: create suppliers in ulb
      fromTopic: inv-supplier-save-topic
      queryMaps:
        - query: >-
            INSERT INTO supplier(id, code, name, address, type,
            status, inactivedate, contactno,active, faxno,
            website, email, description, panno,
            tinno, cstno, vatno, gstno, contactperson,contactpersonno, bankcode, bankbranch,
            bankifsc,bankAcctNo, bankmicr, createdby, createdtime, lastmodifiedby, lastmodifiedtime,tenantid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.suppliers.*
          jsonMaps:
            - jsonPath: $.suppliers.*.id
            - jsonPath: $.suppliers.*.code
            - jsonPath: $.suppliers.*.name
            - jsonPath: $.suppliers.*.address
            - jsonPath: $.suppliers.*.type
            - jsonPath: $.suppliers.*.status
            - jsonPath: $.suppliers.*.inActiveDate
              dbType: LONG
            - jsonPath: $.suppliers.*.contactNo
            - jsonPath: $.suppliers.*.active
            - jsonPath: $.suppliers.*.faxNo
            - jsonPath: $.suppliers.*.website
            - jsonPath: $.suppliers.*.email
            - jsonPath: $.suppliers.*.description
            - jsonPath: $.suppliers.*.panNo
            - jsonPath: $.suppliers.*.tinNo
            - jsonPath: $.suppliers.*.cstNo
            - jsonPath: $.suppliers.*.vatNo
            - jsonPath: $.suppliers.*.gstNo
            - jsonPath: $.suppliers.*.contactPerson
            - jsonPath: $.suppliers.*.contactPersonNo
            - jsonPath: $.suppliers.*.bankCode
            - jsonPath: $.suppliers.*.bankBranch
            - jsonPath: $.suppliers.*.ifsc
            - jsonPath: $.suppliers.*.acctNo
            - jsonPath: $.suppliers.*.micr
            - jsonPath: $.suppliers.*.auditDetails.createdBy
            - jsonPath: $.suppliers.*.auditDetails.createdTime
              dbType: LONG
            - jsonPath: $.suppliers.*.auditDetails.lastModifiedBy
            - jsonPath: $.suppliers.*.auditDetails.lastModifiedTime
              dbType: LONG
            - jsonPath: $.suppliers.*.tenantId
    - version: 1
      name: Supplier update
      description: update suppliers in ulb
      fromTopic: inv-supplier-update-topic
      queryMaps:
        - query: >-
            Update supplier set  name = ?, address = ?, type = ?,
            status = ?, inactivedate = ?, active = ?, contactno = ?, faxno = ?,
            website = ?, email = ?, description = ?, panno = ?,
            tinno = ?, cstno = ?, vatno = ?, gstNo = ?, contactperson = ?,contactpersonno = ?,
            bankcode = ?,bankbranch = ?, bankifsc = ?,bankAcctNo = ?, bankmicr = ?, lastmodifiedby = ?, lastmodifiedtime = ? where code = ? and tenantid = ?
          basePath: $.suppliers.*
          jsonMaps:
            - jsonPath: $.suppliers.*.name
            - jsonPath: $.suppliers.*.address
            - jsonPath: $.suppliers.*.type
            - jsonPath: $.suppliers.*.status
            - jsonPath: $.suppliers.*.inActiveDate
              dbType: LONG
            - jsonPath: $.suppliers.*.active
            - jsonPath: $.suppliers.*.contactNo
            - jsonPath: $.suppliers.*.faxNo
            - jsonPath: $.suppliers.*.website
            - jsonPath: $.suppliers.*.email
            - jsonPath: $.suppliers.*.description
            - jsonPath: $.suppliers.*.panNo
            - jsonPath: $.suppliers.*.tinNo
            - jsonPath: $.suppliers.*.cstNo
            - jsonPath: $.suppliers.*.vatNo
            - jsonPath: $.suppliers.*.gstNo
            - jsonPath: $.suppliers.*.contactPerson
            - jsonPath: $.suppliers.*.contactPersonNo
            - jsonPath: $.suppliers.*.bankCode
            - jsonPath: $.suppliers.*.bankBranch
            - jsonPath: $.suppliers.*.ifsc
            - jsonPath: $.suppliers.*.acctNo
            - jsonPath: $.suppliers.*.micr
            - jsonPath: $.suppliers.*.auditDetails.lastModifiedBy
            - jsonPath: $.suppliers.*.auditDetails.lastModifiedTime
              dbType: LONG
            - jsonPath: $.suppliers.*.code
            - jsonPath: $.suppliers.*.tenantId
    - version: 1.0
      name: material store mapping create
      description: create material store mapping in inventory
      fromTopic: inv-materialstore-save-topic
      queryMaps:
        - query: INSERT INTO materialstoremapping(id, material, store, chartofaccount, active,tenantid , createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.materialStoreMappings.*
          jsonMaps:
            - jsonPath: $.materialStoreMappings.*.id
            - jsonPath: $.materialStoreMappings.*.material.code
            - jsonPath: $.materialStoreMappings.*.store.code
            - jsonPath: $.materialStoreMappings.*.chartofAccount.glCode
            - jsonPath: $.materialStoreMappings.*.active
            - jsonPath: $.materialStoreMappings.*.tenantId
            - jsonPath: $.materialStoreMappings.*.auditDetails.createdBy
            - jsonPath: $.materialStoreMappings.*.auditDetails.lastModifiedBy
            - jsonPath: $.materialStoreMappings.*.auditDetails.createdTime
              dbType: LONG
            - jsonPath: $.materialStoreMappings.*.auditDetails.lastModifiedTime
              dbType: LONG

    - version: 1.0
      name: material store mapping update
      description: update material store mapping  in inventory
      fromTopic: inv-materialstore-update-topic
      queryMaps:
        - query: UPDATE materialstoremapping SET material=?,  store=?,  chartofaccount=?,  active=?, lastmodifiedby=?,  lastmodifiedtime=? WHERE id=? AND tenantid=?;
          basePath: $.materialStoreMappings.*
          jsonMaps:
            - jsonPath: $.materialStoreMappings.*.material.code
            - jsonPath: $.materialStoreMappings.*.store.code
            - jsonPath: $.materialStoreMappings.*.chartofAccount.glCode
            - jsonPath: $.materialStoreMappings.*.active
            - jsonPath: $.materialStoreMappings.*.auditDetails.lastModifiedBy
            - jsonPath: $.materialStoreMappings.*.auditDetails.lastModifiedTime
              dbType: LONG
            - jsonPath: $.materialStoreMappings.*.id
            - jsonPath: $.materialStoreMappings.*.tenantId


    - version: 1.0
      name: material store mapping delete
      description: delete material store mapping  in inventory
      fromTopic: inv-materialstore-delete-topic
      queryMaps:
        - query: DELETE from materialstoremapping WHERE material=? AND store=? AND tenantid=?;
          basePath: $.materialStoreMappings.*
          jsonMaps:
            - jsonPath: $.materialStoreMappings.*.material.code
            - jsonPath: $.materialStoreMappings.*.store.code
            - jsonPath: $.materialStoreMappings.*.tenantId


    - version: 1.0
      name: Opening Balance
      description: Create Opening Balance
      fromTopic: inv-openbalance-save-topic
      queryMaps:
        - query: INSERT INTO materialReceipt(id, tenantId, financialYear,mrnStatus,mrnNumber,receivingstore,receiptDate, receiptType, createdby, createdTime, lastmodifiedby,lastModifiedTime)VALUES ( ?,?,?,?, ?, ?, ? ,? ,? ,?,?,?);
          basePath: $.materialReceipt.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.id
            - jsonPath: $.materialReceipt.*.tenantId
            - jsonPath: $.materialReceipt.*.financialYear
            - jsonPath: $.materialReceipt.*.mrnStatus
            - jsonPath: $.materialReceipt.*.mrnNumber
            - jsonPath: $.materialReceipt.*.receivingStore.code
            - type: CURRENTDATE
              dbType: LONG
            - jsonPath: $.materialReceipt.*.receiptType
            - jsonPath: $.materialReceipt.*.auditDetails.createdBy
              type: LONG
            - type: CURRENTDATE
              dbType: LONG
            - jsonPath: $.materialReceipt.*.auditDetails.lastModifiedBy
              type: LONG
            - type: CURRENTDATE
              dbType: LONG
        - query: INSERT INTO materialreceiptdetail(id, tenantId, material,mrnNumber,uomNo,receivedQty,acceptedQty,unitRate,remarks,createdby,createdTime,lastmodifiedby,lastModifiedTime )VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?,?,?,?,? );
          basePath: $.materialReceipt.*.receiptDetails.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.receiptDetails.*.id
            - jsonPath: $.materialReceipt.*.receiptDetails.*.tenantId
            - jsonPath: $.materialReceipt.*.receiptDetails.*.material.code
            - jsonPath: $.materialReceipt[?({id} in @.receiptDetails[*].id)].mrnNumber
            - jsonPath: $.materialReceipt.*.receiptDetails.*.uom.code
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receivedQty
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receivedQty
            - jsonPath: $.materialReceipt.*.receiptDetails.*.unitRate
            - jsonPath: $.materialReceipt.*.receiptDetails.*.remarks
            - jsonPath: $.materialReceipt.*.auditDetails.createdBy
              type: LONG
            - type: CURRENTDATE
              dbType: LONG
            - jsonPath: $.materialReceipt.*.auditDetails.lastModifiedBy
              type: LONG
            - type: CURRENTDATE
              dbType: LONG
        - query: INSERT INTO materialreceiptdetailaddnlinfo(id, receiptDetailId,tenantId,receivedDate, lotNo,oldReceiptNumber,expiryDate,serialno )VALUES ( ?,?, ?, ?, ?, ?, ?,?);
          basePath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.id
            - jsonPath: $.materialReceipt.*.receiptDetails[?({id} in @.receiptDetailsAddnInfo[*].id)].id
            - jsonPath: $.materialReceipt.*.tenantId
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.receivedDate
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.lotNo
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.oldReceiptNumber
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.expiryDate
              type: LONG
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.serialno
              type: LONG

    - version: 1.0
      name: opening Balance
      description: update opening Balance
      fromTopic: inv-openbalance-update-topic
      queryMaps:
        - query: INSERT INTO materialreceiptdetail(id, tenantId, material, mrnNumber, uomNo,receivedQty, acceptedQty, unitRate, remarks, createdby,createdTime,lastmodifiedby,lastModifiedTime) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id,tenantid) DO UPDATE SET
                 receivedQty = EXCLUDED.receivedQty,acceptedQty = EXCLUDED.receivedQty, unitRate = EXCLUDED.unitRate,
                  lastmodifiedby = EXCLUDED.lastmodifiedby,lastModifiedTime = EXCLUDED.lastmodifiedtime ;
          basePath: $.materialReceipt.*.receiptDetails.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.receiptDetails.*.id
            - jsonPath: $.materialReceipt.*.receiptDetails.*.tenantId
            - jsonPath: $.materialReceipt.*.receiptDetails.*.material.code
            - jsonPath: $.materialReceipt[?({id} in @.receiptDetails[*].id)].mrnNumber
            - jsonPath: $.materialReceipt.*.receiptDetails.*.uom.code
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receivedQty
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receivedQty
            - jsonPath: $.materialReceipt.*.receiptDetails.*.unitRate
            - jsonPath: $.materialReceipt.*.receiptDetails.*.remarks
            - jsonPath: $.materialReceipt.*.auditDetails.createdBy
              type: LONG
            - type: CURRENTDATE
              dbType: LONG
            - jsonPath: $.materialReceipt.*.auditDetails.lastModifiedBy
              type: LONG
            - type: CURRENTDATE
              dbType: LONG

        - query: INSERT INTO materialreceiptdetailaddnlinfo(id, receiptDetailId, tenantId, manufacturedate, lotNo,oldReceiptNumber, expiryDate, serialno)
                 VALUES ( ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id,tenantid) DO UPDATE SET
                 lotNo = EXCLUDED.lotNo, oldReceiptNumber = EXCLUDED.oldReceiptNumber,
                 expiryDate = EXCLUDED.expiryDate ;
          basePath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.id
            - jsonPath: $.materialReceipt.*.receiptDetails[?({id} in @.receiptDetailsAddnInfo[*].id)].id
            - jsonPath: $.materialReceipt.*.tenantId
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.receivedDate
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.lotNo
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.oldReceiptNumber
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.expiryDate
              type: LONG
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.serialno
              type: LONG


    - version: 1.0
      name: priceLists create
      description: create pricelist in inventory
      fromTopic: inv-pricelist-save-topic
      queryMaps:
        - query: INSERT INTO pricelist(id, supplier, rateType, rateContractNumber, rateContractDate, agreementNumber, agreementDate, agreementStartDate, agreementEndDate, active, fileStoreId, priceListDetails, tenantid, createdby, lastmodifiedby, createdtime, lastmodifiedtime ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.priceLists.*
          jsonMaps:
            - jsonPath: $.priceLists.*.id
            - jsonPath: $.priceLists.*.supplier.code
            - jsonPath: $.priceLists.*.rateType
            - jsonPath: $.priceLists.*.rateContractNumber
            - jsonPath: $.priceLists.*.rateContractDate
            - jsonPath: $.priceLists.*.agreementNumber
            - jsonPath: $.priceLists.*.agreementDate
              dbType: LONG
            - jsonPath: $.priceLists.*.agreementStartDate
              dbType: LONG
            - jsonPath: $.priceLists.*.agreementEndDate
              dbType: LONG
            - jsonPath: $.priceLists.*.active
              dbType: BOOLEAN
            - jsonPath: $.priceLists.*.fileStoreId
            - jsonPath: $.priceLists.*.priceListDetails.*.id
            - jsonPath: $.priceLists.*.tenantId
            - jsonPath: $.priceLists.*.auditDetails.createdBy
            - jsonPath: $.priceLists.*.auditDetails.lastModifiedBy
            - jsonPath: $.priceLists.*.auditDetails.createdTime
              dbType: LONG
            - jsonPath: $.priceLists.*.auditDetails.lastModifiedTime
              dbType: LONG

        - query: INSERT INTO pricelistdetails(id, pricelist, material, fromDate, toDate, ratePerUnit, quantity, uom, tenantid, createdby, lastmodifiedby, createdtime, lastmodifiedtime ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.priceLists.*.priceListDetails.*
          jsonMaps:
            - jsonPath: $.priceLists.*.priceListDetails.*.id
            - jsonPath: $.priceLists[?({id} in @.priceListDetails[*].id)].id
            - jsonPath: $.priceLists.*.priceListDetails.*.material.code
            - jsonPath: $.priceLists.*.priceListDetails.*.fromDate
            - jsonPath: $.priceLists.*.priceListDetails.*.toDate
            - jsonPath: $.priceLists.*.priceListDetails.*.ratePerUnit
            - jsonPath: $.priceLists.*.priceListDetails.*.quantity
            - jsonPath: $.priceLists.*.priceListDetails.*.uom.code
            - jsonPath: $.priceLists[?({id} in @.priceListDetails[*].id)].tenantId
            - jsonPath: $.priceLists.*.priceListDetails.*.auditDetails.createdBy
            - jsonPath: $.priceLists.*.priceListDetails.*.auditDetails.lastModifiedBy
            - jsonPath: $.priceLists.*.priceListDetails.*.auditDetails.createdTime
              dbType: LONG
            - jsonPath: $.priceLists.*.priceListDetails.*.auditDetails.lastModifiedTime
              dbType: LONG

    - version: 1.0
      name: priceLists update
      description: update pricelist in inventory
      fromTopic: inv-pricelist-update-topic
      isTransaction: true
      queryMaps:
        - query: update pricelist SET active=?, agreementNumber=?, rateType=?, rateContractNumber=?, rateContractDate=?, agreementDate=?, agreementStartDate=?, agreementEndDate=?, lastmodifiedby=?,  lastmodifiedtime=? WHERE id=? AND tenantid=?;
          basePath: $.priceLists.*
          jsonMaps:
            - jsonPath: $.priceLists.*.active
              dbType: BOOLEAN
            - jsonPath: $.priceLists.*.agreementNumber
            - jsonPath: $.priceLists.*.rateType
            - jsonPath: $.priceLists.*.rateContractNumber
            - jsonPath: $.priceLists.*.rateContractDate
            - jsonPath: $.priceLists.*.agreementDate
              dbType: LONG
            - jsonPath: $.priceLists.*.agreementStartDate
              dbType: LONG
            - jsonPath: $.priceLists.*.agreementEndDate
              dbType: LONG
            - jsonPath: $.priceLists.*.auditDetails.lastModifiedBy
            - jsonPath: $.priceLists.*.auditDetails.lastModifiedTime
              dbType: LONG
            - jsonPath: $.priceLists.*.id
            - jsonPath: $.priceLists.*.tenantId

        - query: INSERT INTO pricelistdetails(id, pricelist, material, fromDate, toDate, ratePerUnit, quantity, uom, active, tenantid, createdby, lastmodifiedby, createdtime, lastmodifiedtime ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id, tenantid) DO UPDATE SET
                  material=EXCLUDED.material, uom=EXCLUDED.uom, active=EXCLUDED.active, quantity=EXCLUDED.quantity, ratePerUnit=EXCLUDED.ratePerUnit, lastmodifiedby=EXCLUDED.lastmodifiedby, lastmodifiedtime=EXCLUDED.lastmodifiedtime
          basePath: $.priceLists.*.priceListDetails.*
          jsonMaps:
            - jsonPath: $.priceLists.*.priceListDetails.*.id
            - jsonPath: $.priceLists[?({id} in @.priceListDetails[*].id)].id
            - jsonPath: $.priceLists.*.priceListDetails.*.material.code
            - jsonPath: $.priceLists.*.priceListDetails.*.fromDate
            - jsonPath: $.priceLists.*.priceListDetails.*.toDate
            - jsonPath: $.priceLists.*.priceListDetails.*.ratePerUnit
            - jsonPath: $.priceLists.*.priceListDetails.*.quantity
            - jsonPath: $.priceLists.*.priceListDetails.*.uom.code
            - jsonPath: $.priceLists.*.priceListDetails.*.active
              dbType: BOOLEAN
            - jsonPath: $.priceLists[?({id} in @.priceListDetails[*].id)].tenantId
            - jsonPath: $.priceLists.*.priceListDetails.*.auditDetails.createdBy
            - jsonPath: $.priceLists.*.priceListDetails.*.auditDetails.lastModifiedBy
            - jsonPath: $.priceLists.*.priceListDetails.*.auditDetails.createdTime
              dbType: LONG
            - jsonPath: $.priceLists.*.priceListDetails.*.auditDetails.lastModifiedTime
              dbType: LONG

    - version: 1
      name: Material Issue create
      description: create material issue
      fromTopic: inv-issues-save-topic
      queryMaps:
        - query: >-
            INSERT INTO materialissue(id, tenantId, issuetype, fromstore, tostore, issuenumber, issuedate, materialissuestatus, description, totalissuevalue, fileStoreId, designation, indentid, issuedtoemployee, issuedtodesignation, issuepurpose,
              supplier, stateId, createdby, createdTime, lastmodifiedby, lastmodifiedtime)
              VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.materialIssues.*
          jsonMaps:
            - jsonPath: $.materialIssues.*.id
            - jsonPath: $.materialIssues.*.tenantId
            - jsonPath: $.materialIssues.*.issueType
            - jsonPath: $.materialIssues.*.fromStore.code
            - jsonPath: $.materialIssues.*.toStore.code
            - jsonPath: $.materialIssues.*.issueNumber
            - jsonPath: $.materialIssues.*.issueDate
              dbType: LONG
            - jsonPath: $.materialIssues.*.materialIssueStatus
            - jsonPath: $.materialIssues.*.description
            - jsonPath: $.materialIssues.*.totalIssueValue
              dbType: DOUBLE
            - jsonPath: $.materialIssues.*.fileStoreId
            - jsonPath: $.materialIssues.*.designation
            - jsonPath: $.materialIssues.*.indent.id
            - jsonPath: $.materialIssues.*.issuedToEmployee
            - jsonPath: $.materialIssues.*.issuedToDesignation
            - jsonPath: $.materialIssues.*.issuePurpose
            - jsonPath: $.materialIssues.*.supplier.code
            - jsonPath: $.materialIssues.*.stateId
              dbType: LONG
            - jsonPath: $.materialIssues.*.auditDetails.createdBy
            - jsonPath: $.materialIssues.*.auditDetails.createdTime
              dbType: LONG
            - jsonPath: $.materialIssues.*.auditDetails.lastModifiedBy
            - jsonPath: $.materialIssues.*.auditDetails.lastModifiedTime
              dbType: LONG

        - query: >-
            INSERT INTO materialissuedetail(id, materialissuenumber, tenantId, orderNumber, value, uom, scrapvalue, voucherheader, indentdetailid, materialcode, quantityissued,description)
              VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.materialIssues.*.materialIssueDetails.*
          jsonMaps:
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.id
            - jsonPath: $.materialIssues[?({id} in @.materialIssueDetails[*].id)].issueNumber
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.tenantId
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.orderNumber
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.value
              dbType: DOUBLE
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.uom.code
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.scrapValue
              dbType: DOUBLE
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.voucherHeader
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.indentDetail.id
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.material.code
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.quantityIssued
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.description

        - query: >-
            INSERT INTO materialissuedfromreceipt(id, tenantId, receiptid, receiptdetailId, receiptdetailaddnlinfoid, quantity, status, issuedetailid)
              VALUES (?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*
          jsonMaps:
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*.id
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*.tenantId
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*.materialReceiptId
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*.materialReceiptDetail.id
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*.materialReceiptDetailAddnlinfoId
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*.quantity
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*.status
            - jsonPath: $.materialIssues.*.materialIssueDetails[?({id} in @.materialIssuedFromReceipts[*].id)].id

    - version: 1.0
      name: Material Issue update
      description: Update Material Issue
      fromTopic: inv-issues-update-topic
      isTransaction: true
      queryMaps:
        - query: >-
               update materialissue set issuetype = ?, fromstore  = ?, tostore = ?, issuedate = ?, materialissuestatus = ?, description = ?,
               totalissuevalue = ?, fileStoreId = ?, designation = ?, indentid = ?, issuedtoemployee = ?, issuedtodesignation = ?, issuepurpose = ?, supplier = ?, stateId = ?, lastmodifiedby = ?, lastModifiedTime = ? where issuenumber = ? and tenantid = ?;
          basePath: $.materialIssues.*
          jsonMaps:
            - jsonPath: $.materialIssues.*.issueType
            - jsonPath: $.materialIssues.*.fromStore.code
            - jsonPath: $.materialIssues.*.toStore.code
            - jsonPath: $.materialIssues.*.issueDate
            - jsonPath: $.materialIssues.*.materialIssueStatus
            - jsonPath: $.materialIssues.*.description
            - jsonPath: $.materialIssues.*.totalIssueValue
              dbType: DOUBLE
            - jsonPath: $.materialIssues.*.fileStoreId
            - jsonPath: $.materialIssues.*.designation
            - jsonPath: $.materialIssues.*.indent.id
            - jsonPath: $.materialIssues.*.issuedToEmployee
            - jsonPath: $.materialIssues.*.issuedToDesignation
            - jsonPath: $.materialIssues.*.issuePurpose
            - jsonPath: $.materialIssues.*.supplier.code
            - jsonPath: $.materialIssues.*.stateId
            - jsonPath: $.materialIssues.*.auditDetails.lastModifiedBy
            - jsonPath: $.materialIssues.*.auditDetails.lastModifiedTime
              dbType: LONG
            - jsonPath: $.materialIssues.*.issueNumber
            - jsonPath: $.materialIssues.*.tenantId
        - query: >-
                 INSERT INTO materialissuedetail(id, tenantId, orderNumber, value, uom, scrapvalue, voucherheader, materialissuenumber, indentdetailid,
                   materialcode, quantityissued, description) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id,tenantid) DO UPDATE SET
                 orderNumber = EXCLUDED.orderNumber, value  = EXCLUDED.value, uom = EXCLUDED.uom,
                 scrapvalue = EXCLUDED.scrapvalue, voucherheader = EXCLUDED.voucherheader, materialissuenumber = EXCLUDED.materialissuenumber,
                 indentdetailid = EXCLUDED.indentdetailid, materialcode = EXCLUDED.materialcode, quantityissued =
                 EXCLUDED.quantityissued, description = EXCLUDED.description;
          basePath: $.materialIssues.*.materialIssueDetails.*
          jsonMaps:
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.id
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.tenantId
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.orderNumber
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.value
              dbType: DOUBLE
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.uom.code
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.scrapValue
              dbType: DOUBLE
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.voucherHeader
            - jsonPath: $.materialIssues[?({id} in @.materialIssueDetails[*].id)].issueNumber
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.indentDetail.id
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.material.code
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.quantityIssued
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.description


        - query: >-
                 INSERT INTO materialissuedfromreceipt(id, tenantId, receiptid, receiptdetailId, receiptdetailaddnlinfoid, quantity, status, issuedetailid ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id,tenantid) DO UPDATE SET
                 receiptid = EXCLUDED.receiptid, receiptdetailId  = EXCLUDED.receiptdetailId, receiptdetailaddnlinfoid = EXCLUDED.receiptdetailaddnlinfoid,
                 quantity = EXCLUDED.quantity, status = EXCLUDED.status, issuedetailid = EXCLUDED.issuedetailid;
          basePath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*
          jsonMaps:
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*.id
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*.tenantId
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*.materialReceiptId
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*.materialReceiptDetail.id
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*.materialReceiptDetailAddnlinfoId
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*.quantity
            - jsonPath: $.materialIssues.*.materialIssueDetails.*.materialIssuedFromReceipts.*.status
            - jsonPath: $.materialIssues.*.materialIssueDetails[?({id} in @.materialIssuedFromReceipts[*].id)].id

    - version: 1.0
      name: Material Reciept Note
      description: Create Material Receipt Note
      fromTopic: inv-materialreceiptnote-save-topic
      queryMaps:
        - query: >-
               INSERT INTO materialreceipt(id, mrnnumber, receivingstore, receiptDate, receiptType, suppliercode, supplierbillno, supplierbilldate,
               challanno, challandate, description, paymentterms, receivedby, designation, mrnstatus, inspectedby, inspectiondate, inspectionremarks,
               tenantid, createdby, createdTime, lastmodifiedby,lastModifiedTime) VALUES ( ?, ?, ?, ?, ?, ?, ? ,? ,? ,?, ?, ?, ?, ?, ?, ?, ?, ?, ? ,? ,? ,?,?);
          basePath: $.materialReceipt.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.id
            - jsonPath: $.materialReceipt.*.mrnNumber
            - jsonPath: $.materialReceipt.*.receivingStore.code
            - jsonPath: $.materialReceipt.*.receiptDate
              dbType: LONG
            - jsonPath: $.materialReceipt.*.receiptType
            - jsonPath: $.materialReceipt.*.supplier.code
            - jsonPath: $.materialReceipt.*.supplierBillNo
            - jsonPath: $.materialReceipt.*.supplierBillDate
            - jsonPath: $.materialReceipt.*.challanNo
            - jsonPath: $.materialReceipt.*.challanDate
              dbType: LONG
            - jsonPath: $.materialReceipt.*.description
            - jsonPath: $.materialReceipt.*.paymentTerms
            - jsonPath: $.materialReceipt.*.receivedBy
            - jsonPath: $.materialReceipt.*.designation
            - jsonPath: $.materialReceipt.*.mrnStatus
            - jsonPath: $.materialReceipt.*.inspectedBy
            - jsonPath: $.materialReceipt.*.inspectionDate
              dbType: LONG
            - jsonPath: $.materialReceipt.*.inspectionRemarks
            - jsonPath: $.materialReceipt.*.tenantId
            - jsonPath: $.materialReceipt.*.auditDetails.createdBy
            - type: CURRENTDATE
              dbType: LONG
            - jsonPath: $.materialReceipt.*.auditDetails.lastModifiedBy
            - type: CURRENTDATE
              dbType: LONG
        - query: INSERT INTO materialreceiptdetail(id, tenantId, material, uomNo, receivedQty, acceptedQty, unitRate, rejectionremark, podetailid, mrnnumber, createdby, createdTime, lastmodifiedby, lastModifiedTime )VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.materialReceipt.*.receiptDetails.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.receiptDetails.*.id
            - jsonPath: $.materialReceipt.*.receiptDetails.*.tenantId
            - jsonPath: $.materialReceipt.*.receiptDetails.*.material.code
            - jsonPath: $.materialReceipt.*.receiptDetails.*.uom.code
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receivedQty
            - jsonPath: $.materialReceipt.*.receiptDetails.*.acceptedQty
            - jsonPath: $.materialReceipt.*.receiptDetails.*.unitRate
            - jsonPath: $.materialReceipt.*.receiptDetails.*.rejectionRemark
            - jsonPath: $.materialReceipt.*.receiptDetails.*.purchaseOrderDetail.id
            - jsonPath: $.materialReceipt[?({id} in @.receiptDetails[*].id)].mrnNumber
            - jsonPath: $.materialReceipt.*.receiptDetails.*.auditDetails.createdBy
            - type: CURRENTDATE
              dbType: LONG
            - jsonPath: $.materialReceipt.*.receiptDetails.*.auditDetails.lastModifiedBy
            - type: CURRENTDATE
              dbType: LONG
        - query: INSERT INTO materialreceiptdetailaddnlinfo(id, receiptDetailId, tenantId, quantity, manufacturedate, lotNo, expiryDate, batchno, serialno )VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.id
            - jsonPath: $.materialReceipt.*.receiptDetails[?({id} in @.receiptDetailsAddnInfo[*].id)].id
            - jsonPath: $.materialReceipt.*.tenantId
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.quantity
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.manufactureDate
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.lotNo
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.expiryDate
              type: LONG
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.batchNo
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.serialNo
              type: LONG

    - version: 1.0
      name: Material Reciept Note
      description: Update Material Receipt Note
      fromTopic: inv-materialreceiptnote-update-topic
      isTransaction: true
      queryMaps:
        - query: >-
               update materialreceipt set receivingstore = ?, receiptDate  = ?, receiptType = ?, suppliercode = ?, supplierbillno = ?, supplierbilldate = ?,
               challanno = ?, challandate = ?, description = ?, paymentterms = ?, receivedby = ?, designation = ?, mrnstatus = ?, inspectedby = ?, inspectiondate = ?,
               inspectionremarks = ?, lastmodifiedby = ?, lastModifiedTime = ? where mrnnumber = ? and tenantid = ?;
          basePath: $.materialReceipt.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.receivingStore.code
            - jsonPath: $.materialReceipt.*.receiptDate
              dbType: LONG
            - jsonPath: $.materialReceipt.*.receiptType
            - jsonPath: $.materialReceipt.*.supplier.code
            - jsonPath: $.materialReceipt.*.supplierBillNo
            - jsonPath: $.materialReceipt.*.supplierBillDate
            - jsonPath: $.materialReceipt.*.challanNo
            - jsonPath: $.materialReceipt.*.challanDate
              dbType: LONG
            - jsonPath: $.materialReceipt.*.description
            - jsonPath: $.materialReceipt.*.paymentTerms
            - jsonPath: $.materialReceipt.*.receivedBy
            - jsonPath: $.materialReceipt.*.designation
            - jsonPath: $.materialReceipt.*.mrnStatus
            - jsonPath: $.materialReceipt.*.inspectedBy
            - jsonPath: $.materialReceipt.*.inspectionDate
              dbType: LONG
            - jsonPath: $.materialReceipt.*.inspectionRemarks
            - jsonPath: $.materialReceipt.*.auditDetails.lastModifiedBy
            - jsonPath: $.materialReceipt.*.auditDetails.lastModifiedTime
              dbType: LONG
            - jsonPath: $.materialReceipt.*.mrnNumber
            - jsonPath: $.materialReceipt.*.tenantId
        - query: >-
                 INSERT INTO materialreceiptdetail(id, tenantId, material, uomNo, receivedQty, acceptedQty, unitRate, rejectionremark, podetailid,
                 mrnnumber, createdby, createdTime, lastmodifiedby, lastModifiedTime) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id,tenantid) DO UPDATE SET
                 material = EXCLUDED.material, uomno  = EXCLUDED.uomno, receivedQty = EXCLUDED.receivedQty,
                 acceptedQty = EXCLUDED.acceptedQty, unitRate = EXCLUDED.unitRate, rejectionremark = EXCLUDED.rejectionremark,
                 podetailid = EXCLUDED.podetailid, mrnnumber = EXCLUDED.mrnnumber, lastmodifiedby = EXCLUDED.lastmodifiedby,
                 lastModifiedTime = EXCLUDED.lastmodifiedtime ;
          basePath: $.materialReceipt.*.receiptDetails.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.receiptDetails.*.id
            - jsonPath: $.materialReceipt.*.receiptDetails.*.tenantId
            - jsonPath: $.materialReceipt.*.receiptDetails.*.material.code
            - jsonPath: $.materialReceipt.*.receiptDetails.*.uom.code
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receivedQty
            - jsonPath: $.materialReceipt.*.receiptDetails.*.acceptedQty
            - jsonPath: $.materialReceipt.*.receiptDetails.*.unitRate
            - jsonPath: $.materialReceipt.*.receiptDetails.*.rejectionRemark
            - jsonPath: $.materialReceipt.*.receiptDetails.*.purchaseOrderDetail.id
            - jsonPath: $.materialReceipt[?({id} in @.receiptDetails[*].id)].mrnNumber
            - jsonPath: $.materialReceipt.*.receiptDetails.*.auditDetails.createdBy
            - type: CURRENTDATE
              dbType: LONG
            - jsonPath: $.materialReceipt.*.receiptDetails.*.auditDetails.lastModifiedBy
            - type: CURRENTDATE
              dbType: LONG
        - query: >-
                 INSERT INTO materialreceiptdetailaddnlinfo(id, receiptDetailId, tenantId, quantity, manufacturedate, lotNo, expiryDate, batchno, serialno)
                 VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id,tenantid) DO UPDATE SET
                 receiptDetailId = EXCLUDED.receiptdetailid, quantity = EXCLUDED.quantity, manufacturedate = EXCLUDED.manufacturedate,
                 lotNo = EXCLUDED.lotno, batchNo = EXCLUDED.batchno,
                 expiryDate = EXCLUDED.expirydate, serialno = EXCLUDED.serialno ;
          basePath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.id
            - jsonPath: $.materialReceipt.*.receiptDetails[?({id} in @.receiptDetailsAddnInfo[*].id)].id
            - jsonPath: $.materialReceipt.*.tenantId
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.manufactureDate
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.quantity
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.lotNo
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.expiryDate
              type: LONG
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.batchNo
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.serialNo
              type: LONG

    - version: 1.0
      name: Purchase Order with indent
      description: Create Purchase order with indent
      fromTopic: inv-purchaseorders-save-topic
      queryMaps:
        - query: >-
              insert into PurchaseOrder (store, purchaseOrderNumber, purchaseOrderDate, purchaseType, rateType, supplier, advanceAmount, advancePercentage, expectedDeliveryDate, deliveryTerms, paymentTerms, remarks, status, fileStoreId, designation, stateId, createdBy, lastModifiedBy, createdTime, lastModifiedTime, id, tenantId, totalAmount) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.purchaseOrders.*
          jsonMaps:
            - jsonPath: $.purchaseOrders.*.store.code
            - jsonPath: $.purchaseOrders.*.purchaseOrderNumber
            - jsonPath: $.purchaseOrders.*.purchaseOrderDate
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.purchaseType
            - jsonPath: $.purchaseOrders.*.rateType
            - jsonPath: $.purchaseOrders.*.supplier.code
            - jsonPath: $.purchaseOrders.*.advanceAmount
            - jsonPath: $.purchaseOrders.*.advancePercentage
            - jsonPath: $.purchaseOrders.*.expectedDeliveryDate
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.deliveryTerms
            - jsonPath: $.purchaseOrders.*.paymentTerms
            - jsonPath: $.purchaseOrders.*.remarks
            - jsonPath: $.purchaseOrders.*.status
            - jsonPath: $.purchaseOrders.*.fileStoreId
            - jsonPath: $.purchaseOrders.*.designation
            - jsonPath: $.purchaseOrders.*.stateId
            - jsonPath: $.purchaseOrders.*.auditDetails.createdBy
            - jsonPath: $.purchaseOrders.*.auditDetails.lastModifiedBy
            - jsonPath: $.purchaseOrders.*.auditDetails.createdTime
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.auditDetails.lastModifiedTime
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.id
            - jsonPath: $.purchaseOrders.*.tenantId
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.totalAmount
        - query: INSERT INTO PurchaseOrderDetail(id, tenantId,material, purchaseOrder, orderNumber, uom, priceList, orderQuantity, receivedQuantity, unitPrice, description, tenderquantity, usedquantity)VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? );
          basePath: $.purchaseOrders.*.purchaseOrderDetails.*
          jsonMaps:
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.id
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.tenantId
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.material.code
            - jsonPath: $.purchaseOrders[?({id} in @.purchaseOrderDetails[*].id)].purchaseOrderNumber
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.orderNumber
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.uom.code
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.priceList.id
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.orderQuantity
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.receivedQuantity
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.unitPrice
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.description
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.tenderquantity
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.usedquantity
        - query: INSERT INTO PurchaseIndentDetail(id, purchaseOrderDetail, tenantId, indentDetail, quantity )VALUES ( ?, ?, ?, ?, ?);
          basePath: $.purchaseOrders.*.purchaseOrderDetails.*.purchaseIndentDetails.*
          jsonMaps:
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.purchaseIndentDetails.*.id
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails[?({id} in @.purchaseIndentDetails[*].id)].id
            - jsonPath: $.purchaseOrders.*.tenantId
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.purchaseIndentDetails.*.indentDetail.id
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.purchaseIndentDetails.*.quantity
        - query: >-
            update indentdetail set poOrderedQuantity = indentdetail.indentQuantity where id = ? and tenantid = ? and deleted=false;
          basePath: $.purchaseOrders.*.purchaseOrderDetails.*.purchaseIndentDetails.*.indentdetail
          jsonMaps:
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.purchaseIndentDetails.*.indentDetail.*.id
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.purchaseIndentDetails.*.indentDetail.*.tenantId
    - version: 1.0
      name: Update Purchase Order with indent
      description: Update Purchase Order with indent
      fromTopic: inv-purchaseorders-update-topic
      queryMaps:
        - query: >-
               update purchaseorder set store= ? , totalAmount=?, purchaseOrderDate= ? , purchaseType= ? , rateType= ? , supplier= ? , advanceAmount= ? , advancePercentage= ? , expectedDeliveryDate= ? , deliveryTerms= ? , paymentTerms= ? , remarks= ? , status= ? , fileStoreId= ? , designation= ? , stateId= ? , lastModifiedBy= ? , lastModifiedTime= ? where purchaseOrderNumber = ? and tenantid = ?;
          basePath: $.purchaseOrders.*
          jsonMaps:
            - jsonPath: $.purchaseOrders.*.store.code
            - jsonPath: $.purchaseOrders.*.totalAmount
            - jsonPath: $.purchaseOrders.*.purchaseOrderDate
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.purchaseType
            - jsonPath: $.purchaseOrders.*.rateType
            - jsonPath: $.purchaseOrders.*.supplier.code
            - jsonPath: $.purchaseOrders.*.advanceAmount
            - jsonPath: $.purchaseOrders.*.advancePercentage
            - jsonPath: $.purchaseOrders.*.expectedDeliveryDate
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.deliveryTerms
            - jsonPath: $.purchaseOrders.*.paymentTerms
            - jsonPath: $.purchaseOrders.*.remarks
            - jsonPath: $.purchaseOrders.*.status
            - jsonPath: $.purchaseOrders.*.fileStoreId
            - jsonPath: $.purchaseOrders.*.designation
            - jsonPath: $.purchaseOrders.*.stateId
            - jsonPath: $.purchaseOrders.*.auditDetails.lastModifiedBy
            - jsonPath: $.purchaseOrders.*.auditDetails.lastModifiedTime
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.purchaseOrderNumber
            - jsonPath: $.purchaseOrders.*.tenantId
        - query: >-
               INSERT INTO PurchaseOrderDetail(id, tenantId,material, purchaseOrder, orderNumber, uom, priceList, orderQuantity, receivedQuantity, unitPrice, description, tenderquantity, usedquantity)VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) ON CONFLICT(id, tenantId) DO UPDATE SET
               material=EXCLUDED.material, purchaseOrder=EXCLUDED.purchaseOrder, orderNumber=EXCLUDED.orderNumber, uom=EXCLUDED.uom, pricelist=EXCLUDED.pricelist, orderQuantity=EXCLUDED.orderQuantity, receivedQuantity=EXCLUDED.receivedQuantity, unitPrice=EXCLUDED.unitPrice, description=EXCLUDED.description, tenderquantity=EXCLUDED.tenderquantity, usedquantity=EXCLUDED.usedquantity;
          basePath: $.purchaseOrders.*.purchaseOrderDetails.*
          jsonMaps:
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.id
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.tenantId
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.material.code
            - jsonPath: $.purchaseOrders[?({id} in @.purchaseOrderDetails[*].id)].purchaseOrderNumber
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.orderNumber
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.uom.code
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.priceList.id
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.orderQuantity
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.receivedQuantity
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.unitPrice
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.description
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.tenderquantity
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.usedquantity
        - query: >-
               INSERT INTO PurchaseIndentDetail(id, purchaseOrderDetail, tenantId, indentDetail, quantity )VALUES ( ?, ?, ?, ?, ?) ON CONFLICT(id, tenantId) DO UPDATE SET
               PurchaseOrderDetail=EXCLUDED.PurchaseOrderDetail, indentDetail=EXCLUDED.indentDetail, quantity=EXCLUDED.quantity;
          basePath:  $.purchaseOrders.*.purchaseOrderDetails.*.purchaseIndentDetails.*
          jsonMaps:
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.purchaseIndentDetails.*.id
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails[?({id} in @.purchaseIndentDetails[*].id)].id
            - jsonPath: $.purchaseOrders.*.tenantId
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.purchaseIndentDetails.*.indentDetail.id
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.purchaseIndentDetails.*.quantity
    - version: 1.0
      name: Purchase Order for non indent
      description: Create Purchase order for non indent
      fromTopic: inv-purchaseorders-nonindent-save-topic
      queryMaps:
        - query: >-
              insert into PurchaseOrder (store, purchaseOrderNumber, purchaseOrderDate, purchaseType, rateType, supplier, advanceAmount, advancePercentage, expectedDeliveryDate, deliveryTerms, paymentTerms, remarks, status, fileStoreId, designation, stateId, createdBy, lastModifiedBy, createdTime, lastModifiedTime, id, tenantId, totalAmount) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.purchaseOrders.*
          jsonMaps:
            - jsonPath: $.purchaseOrders.*.store.code
            - jsonPath: $.purchaseOrders.*.purchaseOrderNumber
            - jsonPath: $.purchaseOrders.*.purchaseOrderDate
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.purchaseType
            - jsonPath: $.purchaseOrders.*.rateType
            - jsonPath: $.purchaseOrders.*.supplier.code
            - jsonPath: $.purchaseOrders.*.advanceAmount
            - jsonPath: $.purchaseOrders.*.advancePercentage
            - jsonPath: $.purchaseOrders.*.expectedDeliveryDate
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.deliveryTerms
            - jsonPath: $.purchaseOrders.*.paymentTerms
            - jsonPath: $.purchaseOrders.*.remarks
            - jsonPath: $.purchaseOrders.*.status
            - jsonPath: $.purchaseOrders.*.fileStoreId
            - jsonPath: $.purchaseOrders.*.designation
            - jsonPath: $.purchaseOrders.*.stateId
            - jsonPath: $.purchaseOrders.*.auditDetails.createdBy
            - jsonPath: $.purchaseOrders.*.auditDetails.lastModifiedBy
            - jsonPath: $.purchaseOrders.*.auditDetails.createdTime
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.auditDetails.lastModifiedTime
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.id
            - jsonPath: $.purchaseOrders.*.tenantId
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.totalAmount
        - query: INSERT INTO PurchaseOrderDetail(id, tenantId,material, purchaseOrder, orderNumber, uom, priceList, orderQuantity, receivedQuantity, unitPrice, description, tenderquantity, usedquantity)VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? );
          basePath: $.purchaseOrders.*.purchaseOrderDetails.*
          jsonMaps:
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.id
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.tenantId
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.material.code
            - jsonPath: $.purchaseOrders[?({id} in @.purchaseOrderDetails[*].id)].purchaseOrderNumber
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.orderNumber
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.uom.code
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.priceList.id
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.orderQuantity
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.receivedQuantity
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.unitPrice
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.description
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.tenderquantity
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.usedquantity

    - version: 1.0
      name: Update Purchase Order for non indent
      description: Update Purchase Order for non indent
      fromTopic: inv-purchaseorders-nonindent-update-topic
      queryMaps:
        - query: >-
               update purchaseorder set store= ?, totalAmount=?, purchaseOrderDate= ? , purchaseType= ? , rateType= ? , supplier= ? , advanceAmount= ? , advancePercentage= ? , expectedDeliveryDate= ? , deliveryTerms= ? , paymentTerms= ? , remarks= ? , status= ? , fileStoreId= ? , designation= ? , stateId= ? , lastModifiedBy= ? , lastModifiedTime= ? where purchaseOrderNumber = ? and tenantid = ?;
          basePath: $.purchaseOrders.*
          jsonMaps:
            - jsonPath: $.purchaseOrders.*.store.code
            - jsonPath: $.purchaseOrders.*.totalAmount
            - jsonPath: $.purchaseOrders.*.purchaseOrderDate
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.purchaseType
            - jsonPath: $.purchaseOrders.*.rateType
            - jsonPath: $.purchaseOrders.*.supplier.code
            - jsonPath: $.purchaseOrders.*.advanceAmount
            - jsonPath: $.purchaseOrders.*.advancePercentage
            - jsonPath: $.purchaseOrders.*.expectedDeliveryDate
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.deliveryTerms
            - jsonPath: $.purchaseOrders.*.paymentTerms
            - jsonPath: $.purchaseOrders.*.remarks
            - jsonPath: $.purchaseOrders.*.status
            - jsonPath: $.purchaseOrders.*.fileStoreId
            - jsonPath: $.purchaseOrders.*.designation
            - jsonPath: $.purchaseOrders.*.stateId
            - jsonPath: $.purchaseOrders.*.auditDetails.lastModifiedBy
            - jsonPath: $.purchaseOrders.*.auditDetails.lastModifiedTime
              dbType: LONG
            - jsonPath: $.purchaseOrders.*.purchaseOrderNumber
            - jsonPath: $.purchaseOrders.*.tenantId
        - query: >-
               INSERT INTO PurchaseOrderDetail(id, tenantId,material, purchaseOrder, orderNumber, uom, priceList, orderQuantity, receivedQuantity, unitPrice, description, tenderquantity, usedquantity)VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) ON CONFLICT(id, tenantId) DO UPDATE SET
               material=EXCLUDED.material, purchaseOrder=EXCLUDED.purchaseOrder, orderNumber=EXCLUDED.orderNumber, uom=EXCLUDED.uom, pricelist=EXCLUDED.pricelist, orderQuantity=EXCLUDED.orderQuantity, receivedQuantity=EXCLUDED.receivedQuantity, unitPrice=EXCLUDED.unitPrice, description=EXCLUDED.description, tenderquantity=EXCLUDED.tenderquantity, usedquantity=EXCLUDED.usedquantity;
          basePath: $.purchaseOrders.*.purchaseOrderDetails.*
          jsonMaps:
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.id
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.tenantId
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.material.code
            - jsonPath: $.purchaseOrders[?({id} in @.purchaseOrderDetails[*].id)].purchaseOrderNumber
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.orderNumber
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.uom.code
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.priceList.id
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.orderQuantity
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.receivedQuantity
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.unitPrice
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.description
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.tenderquantity
            - jsonPath: $.purchaseOrders.*.purchaseOrderDetails.*.usedquantity
    - version: 1
      name: Indents create
      description: create Indents in ulb
      fromTopic: inv-indents-save-topic
      queryMaps:
        - query: >-
            insert into indent (issueStore, indentStore, indentDate, indentNumber, indentType, indentPurpose, inventoryType,
            expectedDeliveryDate, materialHandOverTo, narration, indentStatus,  totalIndentValue, fileStoreId,
             indentCreatedBy, designation, stateId, createdBy, lastModifiedBy, createdTime, lastModifiedTime, id, tenantId)
             values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,  ?, ?) on conflict (indentnumber,tenantid) do update set
             totalIndentValue=EXCLUDED.totalIndentValue,issueStore=EXCLUDED.issueStore,indentStore=EXCLUDED.indentStore,
             indentDate=EXCLUDED.indentDate,  indentType=EXCLUDED.indentType,indentPurpose=EXCLUDED.indentPurpose,inventoryType=EXCLUDED.inventoryType,
             expectedDeliveryDate=EXCLUDED.expectedDeliveryDate,materialHandOverTo=EXCLUDED.materialHandOverTo,narration=EXCLUDED.narration,
             indentStatus=EXCLUDED.indentStatus, fileStoreId=EXCLUDED.fileStoreId,designation=EXCLUDED.designation,
             stateId=EXCLUDED.stateId,lastModifiedBy=EXCLUDED.lastModifiedBy,lastModifiedTime=EXCLUDED.lastModifiedTime
          basePath: $.indents.*
          jsonMaps:
            - jsonPath: $.indents.*.issueStore.code
            - jsonPath: $.indents.*.indentStore.code
            - jsonPath: $.indents.*.indentDate
            - jsonPath: $.indents.*.indentNumber
            - jsonPath: $.indents.*.indentType
            - jsonPath: $.indents.*.indentPurpose
            - jsonPath: $.indents.*.inventoryType
            - jsonPath: $.indents.*.expectedDeliveryDate
              dbType: LONG
            - jsonPath: $.indents.*.materialHandOverTo
            - jsonPath: $.indents.*.narration
            - jsonPath: $.indents.*.indentStatus
            - jsonPath: $.indents.*.totalIndentValue
              dbType: DOUBLE
            - jsonPath: $.indents.*.fileStoreId
            - jsonPath: $.indents.*.indentCreatedBy
            - jsonPath: $.indents.*.designation
            - jsonPath: $.indents.*.stateId
            - jsonPath: $.indents.*.createdBy
            - jsonPath: $.indents.*.lastModifiedBy
            - jsonPath: $.indents.*.createdTime
              dbType: LONG
            - jsonPath: $.indents.*.lastModifiedTime
              dbType: LONG
            - jsonPath: $.indents.*.id
            - jsonPath: $.indents.*.tenantId
        - query: >-
            insert into indentdetail (material, uom, parentIndentLine, orderNumber, projectCode, indentNumber, asset, indentQuantity,
            totalProcessedQuantity, indentIssuedQuantity, poOrderedQuantity, interstoreRequestQuantity, deliveryTerms, remarks, id, tenantId)
             values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) on CONFLICT (id,tenantid) DO UPDATE SET
             material=EXCLUDED.material , uom=EXCLUDED.uom ,parentIndentLine=EXCLUDED.parentIndentLine,orderNumber=EXCLUDED.orderNumber,projectCode=EXCLUDED.projectCode ,indentNumber=EXCLUDED.indentNumber,asset=EXCLUDED.asset,
             indentQuantity=EXCLUDED.indentQuantity;
          basePath: $.indents.*.indentDetails.*
          jsonMaps:
            - jsonPath: $.indents.*.indentDetails.*.material.code
            - jsonPath: $.indents.*.indentDetails.*.uom.code
            - jsonPath: $.indents.*.indentDetails.*.parentIndentLine
            - jsonPath: $.indents.*.indentDetails.*.orderNumber
            - jsonPath: $.indents.*.indentDetails.*.projectCode.code
            - jsonPath: $.indents[?({id} in @.indentDetails[*].id)].indentNumber
            - jsonPath: $.indents.*.indentDetails.*.asset.code
            - jsonPath: $.indents.*.indentDetails.*.indentQuantity
            - jsonPath: $.indents.*.indentDetails.*.totalProcessedQuantity
            - jsonPath: $.indents.*.indentDetails.*.indentIssuedQuantity
            - jsonPath: $.indents.*.indentDetails.*.poOrderedQuantity
            - jsonPath: $.indents.*.indentDetails.*.interstoreRequestQuantity
            - jsonPath: $.indents.*.indentDetails.*.deliveryTerms
            - jsonPath: $.indents.*.indentDetails.*.remarks
            - jsonPath: $.indents.*.indentDetails.*.id
            - jsonPath: $.indents.*.indentDetails.*.tenantId

    - version: 1
      name: Indent Details Quantity Update
      description: update indent details quantity
      fromTopic: inv-indents-addquantity-topic
      queryMaps:
        - query: >-
            update indentdetail set  indentIssuedQuantity = indentIssuedQuantity+?, poOrderedQuantity = poOrderedQuantity+?,
            totalProcessedQuantity = totalProcessedQuantity+?, interstoreRequestQuantity = interstoreRequestQuantity+?
            where id = ? and tenantid = ?
          basePath: $.indentDetails.*
          jsonMaps:
            - jsonPath: $.indentDetails.*.indentIssuedQuantity
            - jsonPath: $.indentDetails.*.poOrderedQuantity
            - jsonPath: $.indentDetails.*.totalProcessedQuantity
            - jsonPath: $.indentDetails.*.interstoreRequestQuantity
            - jsonPath: $.indentDetails.*.id
            - jsonPath: $.indentDetails.*.tenantId

    - version: 1
      name: Indent Details Quantity Update
      description: update indent details quantity
      fromTopic: inv-indents-subtractquantity-topic
      queryMaps:
        - query: >-
            update indentdetail set  indentIssuedQuantity = indentIssuedQuantity-?, poOrderedQuantity = poOrderedQuantity-?,
            totalProcessedQuantity = totalProcessedQuantity-?, interstoreRequestQuantity = interstoreRequestQuantity-?
            where id = ? and tenantid = ?
          basePath: $.indentDetails.*
          jsonMaps:
            - jsonPath: $.indentDetails.*.indentIssuedQuantity
            - jsonPath: $.indentDetails.*.poOrderedQuantity
            - jsonPath: $.indentDetails.*.totalProcessedQuantity
            - jsonPath: $.indentDetails.*.interstoreRequestQuantity
            - jsonPath: $.indentDetails.*.id
            - jsonPath: $.indentDetails.*.tenantId

    - version: 1
      name: Update Purchase Order From Cancel Material Receipt
      description: update purchase order from cancel material receipt
      fromTopic: inv-purchaseorders-cancelreceipt-topic
      queryMaps:
        - query: >-
            update purchaseorder
            set status = (case when status = 'Fulfilled and Paid' then 'Fulfilled and Unpaid' ELSE status end )
            where purchaseordernumber =
            (select purchaseorder from purchaseorderdetail where id = ? and tenantid = ? );
          basePath: $.materialReceipt.*.receiptDetails.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.receiptDetails.*.purchaseOrderDetail.id
            - jsonPath: $.materialReceipt.*.receiptDetails.*.tenantId
        - query: >-
                 update purchaseorderdetail set receivedquantity = receivedquantity-? where id = ? and tenantid = ? ;
          basePath: $.materialReceipt.*.receiptDetails.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.receiptDetails.*.acceptedQty
            - jsonPath: $.materialReceipt.*.receiptDetails.*.purchaseOrderDetail.id
            - jsonPath: $.materialReceipt.*.receiptDetails.*.tenantId

    - version: 1.0
      name: Material Reciept Note
      description: Create/Update Miscellaneous Material Receipt Note
      fromTopic: inv-miscellaneousreceiptnote-save-topic
      isTransaction: true
      queryMaps:
        - query: >-
               INSERT INTO materialreceipt(id, mrnnumber, issuenumber, receivingstore, receiptDate, receiptType, suppliercode, supplierbillno, supplierbilldate,
               challanno, challandate, description, paymentterms, receivedby, designation, mrnstatus, inspectedby, inspectiondate, inspectionremarks,
               tenantid, createdby, createdTime, lastmodifiedby,lastModifiedTime) VALUES ( ?, ?, ?, ?, ?, ?, ? ,? ,? ,?, ?, ?, ?, ?, ?, ?, ?, ?, ? ,? ,? ,?, ?, ?)
               ON CONFLICT (mrnnumber,tenantid) DO UPDATE SET
               receivingstore = EXCLUDED.receivingstore, receiptDate  = EXCLUDED.receiptdate, receiptType = EXCLUDED.receiptType, suppliercode = EXCLUDED.suppliercode,
               supplierbillno = EXCLUDED.supplierbillno, supplierbilldate = EXCLUDED.supplierbilldate, challanno = EXCLUDED.challanno, challandate = EXCLUDED.challandate,
               description = EXCLUDED.description, paymentterms = EXCLUDED.paymentterms, receivedby = EXCLUDED.receivedby, designation = EXCLUDED.designation,
               mrnstatus = EXCLUDED.mrnstatus, inspectedby = EXCLUDED.inspectedby, inspectiondate = EXCLUDED.inspectiondate,
               inspectionremarks = EXCLUDED.inspectionremarks, lastmodifiedby = EXCLUDED.lastmodifiedby,
               lastModifiedTime = EXCLUDED.lastmodifiedtime ;
          basePath: $.materialReceipt.*
          basePath: $.materialReceipt.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.id
            - jsonPath: $.materialReceipt.*.mrnNumber
            - jsonPath: $.materialReceipt.*.issueNumber
            - jsonPath: $.materialReceipt.*.receivingStore.code
            - jsonPath: $.materialReceipt.*.receiptDate
              dbType: LONG
            - jsonPath: $.materialReceipt.*.receiptType
            - jsonPath: $.materialReceipt.*.supplier.code
            - jsonPath: $.materialReceipt.*.supplierBillNo
            - jsonPath: $.materialReceipt.*.supplierBillDate
            - jsonPath: $.materialReceipt.*.challanNo
            - jsonPath: $.materialReceipt.*.challanDate
              dbType: LONG
            - jsonPath: $.materialReceipt.*.description
            - jsonPath: $.materialReceipt.*.paymentTerms
            - jsonPath: $.materialReceipt.*.receivedBy
            - jsonPath: $.materialReceipt.*.designation
            - jsonPath: $.materialReceipt.*.mrnStatus
            - jsonPath: $.materialReceipt.*.inspectedBy
            - jsonPath: $.materialReceipt.*.inspectionDate
              dbType: LONG
            - jsonPath: $.materialReceipt.*.inspectionRemarks
            - jsonPath: $.materialReceipt.*.tenantId
            - jsonPath: $.materialReceipt.*.auditDetails.createdBy
            - type: CURRENTDATE
              dbType: LONG
            - jsonPath: $.materialReceipt.*.auditDetails.lastModifiedBy
            - type: CURRENTDATE
              dbType: LONG
        - query: >-
                 INSERT INTO materialreceiptdetail(id, tenantId, material, uomNo, receivedQty, acceptedQty, unitRate, rejectionremark,
                 mrnnumber, createdby, createdTime, lastmodifiedby, lastModifiedTime) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id,tenantid) DO UPDATE SET
                 material = EXCLUDED.material, uomno  = EXCLUDED.uomno, receivedQty = EXCLUDED.receivedQty,
                 acceptedQty = EXCLUDED.acceptedQty, unitRate = EXCLUDED.unitRate, rejectionremark = EXCLUDED.rejectionremark,
                 podetailid = EXCLUDED.podetailid, mrnnumber = EXCLUDED.mrnnumber, lastmodifiedby = EXCLUDED.lastmodifiedby,
                 lastModifiedTime = EXCLUDED.lastmodifiedtime ;
          basePath: $.materialReceipt.*.receiptDetails.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.receiptDetails.*.id
            - jsonPath: $.materialReceipt.*.receiptDetails.*.tenantId
            - jsonPath: $.materialReceipt.*.receiptDetails.*.material.code
            - jsonPath: $.materialReceipt.*.receiptDetails.*.uom.code
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receivedQty
            - jsonPath: $.materialReceipt.*.receiptDetails.*.acceptedQty
            - jsonPath: $.materialReceipt.*.receiptDetails.*.unitRate
            - jsonPath: $.materialReceipt.*.receiptDetails.*.rejectionRemark
            - jsonPath: $.materialReceipt[?({id} in @.receiptDetails[*].id)].mrnNumber
            - jsonPath: $.materialReceipt.*.receiptDetails.*.auditDetails.createdBy
            - type: CURRENTDATE
              dbType: LONG
            - jsonPath: $.materialReceipt.*.receiptDetails.*.auditDetails.lastModifiedBy
            - type: CURRENTDATE
              dbType: LONG
        - query: >-
                 INSERT INTO materialreceiptdetailaddnlinfo(id, receiptDetailId, tenantId, quantity, manufacturedate, lotNo, expiryDate, batchno, serialno)
                 VALUES ( ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id,tenantid) DO UPDATE SET
                 receiptDetailId = EXCLUDED.receiptdetailid, manufacturedate = EXCLUDED.manufacturedate,
                 lotNo = EXCLUDED.lotno, batchNo = EXCLUDED.batchno,
                 expiryDate = EXCLUDED.expirydate, serialno = EXCLUDED.serialno ;
          basePath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*
          jsonMaps:
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.id
            - jsonPath: $.materialReceipt.*.receiptDetails[?({id} in @.receiptDetailsAddnInfo[*].id)].id
            - jsonPath: $.materialReceipt.*.tenantId
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.manufactureDate
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.quantity
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.lotNo
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.expiryDate
              type: LONG
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.batchNo
            - jsonPath: $.materialReceipt.*.receiptDetails.*.receiptDetailsAddnInfo.*.serialNo
              type: LONG

    - version: 1.0
      name: material type store mapping create/update
      description: create material type store mapping in inventory
      fromTopic: inv-materialtypestoremapping-save-topic
      queryMaps:
        - query: >-
                 INSERT INTO materialtypestoremapping(id, materialtype, store, chartofaccount, active,tenantid , createdby, lastmodifiedby, createdtime, lastmodifiedtime)
                 VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id,tenantid) DO UPDATE SET
                 materialtype= EXCLUDED.materialType,  store=EXCLUDED.store,  chartofaccount=EXCLUDED.chartofaccount,
                 active=EXCLUDED.active, lastmodifiedby=EXCLUDED.lastmodifiedby,  lastmodifiedtime=EXCLUDED.lastmodifiedtime;
          basePath: $.materialTypeStores.*
          jsonMaps:
            - jsonPath: $.materialTypeStores.*.id
            - jsonPath: $.materialTypeStores.*.materialType.code
            - jsonPath: $.materialTypeStores.*.store.code
            - jsonPath: $.materialTypeStores.*.chartofAccount.glCode
            - jsonPath: $.materialTypeStores.*.active
            - jsonPath: $.materialTypeStores.*.tenantId
            - jsonPath: $.materialTypeStores.*.auditDetails.createdBy
            - jsonPath: $.materialTypeStores.*.auditDetails.lastModifiedBy
            - jsonPath: $.materialTypeStores.*.auditDetails.createdTime
              dbType: LONG
            - jsonPath: $.materialTypeStores.*.auditDetails.lastModifiedTime
              dbType: LONG



